# Product Context

## 项目背景

@idealjs/sapling 源于对现有 React 实现的一些思考和改进尝试。主要受到以下项目的启发：

1. SolidJS (2022)
   - 启发了基本的实现思路
   - 提供了性能优化的参考

2. VanJS (2023)
   - 世界上最小的响应式 UI 库
   - 启发了简化实现的方向

## 问题陈述

### React 存在的问题

1. 提取用户代码意图的思路存在局限
   - 函数组件重新执行可能带来副作用
   - 数据与视图关系没有变化时仍会重新执行
   - Virtual DOM 的额外开销

2. 性能问题
   - 树状更新导致不必要的重渲染
   - 过低的性能下限
   - 需要手动优化

3. API 设计问题
   - useEffect 的依赖处理复杂
   - 状态更新的心智负担
   - 特殊的优化 API (useMemo, useCallback)

## 解决方案

### 1. 响应式设计
- 代码围绕"数据 => 视图"关系编写
- 数据与视图操作解耦
- 自动依赖收集和更新

### 2. 性能优化
- 内置缓存机制
- 精确的 DOM 更新
- 避免不必要的重新计算

### 3. 开发体验
- 简化的 API 设计
- 自动的性能优化
- 清晰的心智模型

## 目标用户

1. React 开发者
   - 熟悉 JSX 语法
   - 需要更好性能的场景
   - 希望简化状态管理

2. 新项目开发者
   - 需要轻量级解决方案
   - 重视性能和简洁性
   - 偏好响应式编程

## 核心价值主张

1. 更好的性能
   - 精确的更新机制
   - 更低的运行时开销
   - 内置的性能优化

2. 简化的开发模型
   - 响应式数据流
   - 直观的 API 设计
   - 减少样板代码

3. 可预测的行为
   - 清晰的更新规则
   - 一致的执行模型
   - 可控的副作用